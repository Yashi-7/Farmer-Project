<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>üåæ Subsidy Finder</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
      background:  #F1FAF0;
      color: #333;
    }
    h1 {
      color: #2e7d32;
      text-align: center;
    }
    /* .subsidy-card {
      background-color: rgb(178, 178, 178);
      width: 500px;
      height: 500px;
      padding: 12px;
      margin-left: 500px;
      margin-bottom: 12px;
      border-radius: 6px;
      box-shadow: 0 0 5px rgba(0,0,0,0.1);
    } */
    input[type="text"], select {
      margin-top: 10px;
      padding: 6px;
      font-size: 1em;
    }
    a {
      color: #007BFF;
      text-decoration: none;
    }
     .cont{
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 15px;
      flex-wrap: wrap;
      padding: 10px;
       box-shadow: 0 2px 8px rgba(0,0,0,0.08);
      margin: 35px;
      border-radius: 25px;
      border: 1px solid #ccc;
      background-color: #fffbea;   
    }
    
      
      .subsidy-card {
    background-color: #f4f4f4;
    width: 500px;
    padding: 14px;
    height: 450px;
    margin: 20px auto;
    border-radius: 8px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.15);
    text-align: left;
  }
.subsidy-card img {
  display: block;
  width: 100%;
  max-height: 300px;
  object-fit: cover;
  border-radius: 6px;
}

  </style>
</head>
<body>
  <h1 id="title">üåæ Subsidy Finder</h1>

  <div class="cont">
  <label for="languageSelect">üåê Language:</label>
  <select id="languageSelect">
    <option value="en">English</option>
    <option value="hi">‡§π‡§ø‡§®‡•ç‡§¶‡•Ä</option>
    <option value="ml">‡¥Æ‡¥≤‡¥Ø‡¥æ‡¥≥‡¥Ç</option>
  </select>



  <label for="subsidySearch">üîç Search Crop or Scheme:</label>
  <input type="text" id="subsidySearch" placeholder="Search crop or scheme..." />
  </div>

  <div id="subsidy-results" class="subsi"></div>

  <!-- PapaParse for CSV parsing -->
  <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>

  <!-- Subsidy Finder Script -->
  <script>
    const SHEET_URL2 = "https://docs.google.com/spreadsheets/d/e/2PACX-1vSB6g-wtObmOPOA5dAqM0zndKq1xnrCaQnqvOO84qGeCts2QEcNlmnFP54bz6i2iIYCzLkV-PfBqFZE/pub?output=csv";
    let allSchemes = [];
    let LANGUAGE = "en";

    const translations = {
      en: {
        title: "üåæ Subsidy Finder",
        searchPlaceholder: "Search crop or scheme...",
        noResults: "‚ùå No matching subsidies found.",
        enterQuery: "üîç Please enter a crop or scheme name.",
        crop: "Crop",
        region: "Region",
        category: "Category",
        scheme: "Scheme",
        description: "Description",
        eligibility: "Eligibility"
      },
      hi: {
        title: "üåæ ‡§∏‡§¨‡•ç‡§∏‡§ø‡§°‡•Ä ‡§ñ‡•ã‡§ú",
        searchPlaceholder: "‡§´‡§∏‡§≤ ‡§Ø‡§æ ‡§Ø‡•ã‡§ú‡§®‡§æ ‡§ñ‡•ã‡§ú‡•á‡§Ç...",
        noResults: "‚ùå ‡§ï‡•ã‡§à ‡§Æ‡§ø‡§≤‡§§‡•Ä-‡§ú‡•Å‡§≤‡§§‡•Ä ‡§Ø‡•ã‡§ú‡§®‡§æ ‡§®‡§π‡•Ä‡§Ç ‡§Æ‡§ø‡§≤‡•Ä‡•§",
        enterQuery: "üîç ‡§ï‡•É‡§™‡§Ø‡§æ ‡§´‡§∏‡§≤ ‡§Ø‡§æ ‡§Ø‡•ã‡§ú‡§®‡§æ ‡§ï‡§æ ‡§®‡§æ‡§Æ ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç‡•§",
        crop: "‡§´‡§∏‡§≤",
        region: "‡§ï‡•ç‡§∑‡•á‡§§‡•ç‡§∞",
        category: "‡§∂‡•ç‡§∞‡•á‡§£‡•Ä",
        scheme: "‡§Ø‡•ã‡§ú‡§®‡§æ",
        description: "‡§µ‡§ø‡§µ‡§∞‡§£",
        eligibility: "‡§™‡§æ‡§§‡•ç‡§∞‡§§‡§æ"
      },
      ml: {
        title: "üåæ ‡¥∏‡¥¨‡µç‡¥∏‡¥ø‡¥°‡¥ø ‡¥´‡µà‡µª‡¥°‡µº",
        searchPlaceholder: "‡¥µ‡¥ø‡¥≥‡¥Ø‡µã ‡¥™‡¥¶‡µç‡¥ß‡¥§‡¥ø‡¥Ø‡µã ‡¥§‡¥ø‡¥∞‡¥Ø‡µÅ‡¥ï...",
        noResults: "‚ùå ‡¥Ø‡¥æ‡¥§‡µä‡¥∞‡µÅ ‡¥™‡µä‡¥∞‡µÅ‡¥§‡µç‡¥§‡¥Æ‡µÅ‡¥≥‡µç‡¥≥ ‡¥™‡¥¶‡µç‡¥ß‡¥§‡¥ø ‡¥ï‡¥£‡µç‡¥ü‡µÜ‡¥§‡µç‡¥§‡¥ø‡¥Ø‡¥ø‡¥≤‡µç‡¥≤.",
        enterQuery: "üîç ‡¥™‡¥¶‡µç‡¥ß‡¥§‡¥ø‡¥Ø‡µÅ‡¥ü‡µÜ ‡¥™‡µá‡¥∞‡µç ‡¥®‡µΩ‡¥ï‡µÅ‡¥ï.",
        crop: "‡¥µ‡¥ø‡¥≥",
        region: "‡¥™‡µç‡¥∞‡¥¶‡µá‡¥∂‡¥Ç",
        category: "‡¥µ‡¥ø‡¥≠‡¥æ‡¥ó‡¥Ç",
        scheme: "‡¥™‡¥¶‡µç‡¥ß‡¥§‡¥ø",
        description: "‡¥µ‡¥ø‡¥µ‡¥∞‡¥£‡¥Ç",
        eligibility: "‡¥Ø‡µã‡¥ó‡µç‡¥Ø‡¥§"
      }
    };
 
  const cropImages = {
    banana: "bana1.jpg",
    rice:"rice1.jpg",
    paddy: "paddy.jpg",
    coconut:"coco.jpg",
    arecanut:"arecanut.jpg",
    vegetables:"vege.jpg",
    tapioca:"tapioca.jpg",
    cocoa: "cocoa.jpg",
    pepper:"pepp1.jpg",
    ginger:"ginger1.jpg",
    turmeric:"turmeric1.jpg",
    jackfruit:"jackfruit.jpg",
    rubber:"rubber.jpg",
    mango:"mango.jpg",
    pulse:"pulse.jpg",
    tomato:"tomato.jpg",

  }

    function updateUI() {
      const t = translations[LANGUAGE];
      document.getElementById("title").innerText = t.title;
      document.getElementById("subsidySearch").placeholder = t.searchPlaceholder;
    }

    function renderSchemes(data, query = "") {
      const container = document.getElementById("subsidy-results");
      const t = translations[LANGUAGE];
      container.innerHTML = "";

      if (query === "") {
        container.innerHTML = `<div>${t.enterQuery}</div>`;
        return;
      }

      if (data.length === 0) {
        container.innerHTML = `<div>${t.noResults}</div>`;
        return;
      }

      data.forEach(item => {
         const cropName = item.Crop?.toLowerCase();
  const cropImg = cropImages[cropName] || "https://via.placeholder.com/150?text=No+Image";
        container.innerHTML += `
          <div class="subsidy-card">
            <img src="${cropImg}" alt="${item.Crop}" style="width:100%; max-height:200px; object-fit:cover; border-radius:6px; margin-bottom:10px;">
            üåæ ${t.crop}: ${item.Crop}<br>
            üìç ${t.region}: ${item.Region}<br>
            üßë‚Äçüåæ ${t.category}: ${item.Category}<br>
            üìù ${t.scheme}: ${item["Scheme Name"]}<br>
            üìå ${t.description}: ${item.Description}<br>
            ‚úÖ ${t.eligibility}: ${item.Eligibility}<br>
            üîó <a href="${item.Link}" target="_blank">More Info</a>
          </div>
        `;
      });
    }

    fetch(SHEET_URL2)
      .then(res => res.text())
      .then(csv => {
        const parsed = Papa.parse(csv, { header: true });
        allSchemes = parsed.data.filter(row => row.Crop && row["Scheme Name"]);
        renderSchemes([], "");
      })
      .catch(err => {
        console.error("Fetch error:", err);
        document.getElementById("subsidy-results").innerHTML = "‚ö† Failed to load subsidy data.";
      });

    document.getElementById("subsidySearch").addEventListener("input", (e) => {
      const query = e.target.value.toLowerCase().trim();
      const filtered = allSchemes.filter(item =>
        item.Crop?.toLowerCase().includes(query) ||
        item["Scheme Name"]?.toLowerCase().includes(query)
      );
      renderSchemes(filtered, query);
    });

    document.getElementById("languageSelect").addEventListener("change", (e) => {
      LANGUAGE = e.target.value;
      updateUI();
      renderSchemes([], "");
    });

    window.onload = () => {
      updateUI();
      renderSchemes([], "");
    };
  </script>
</body>
</html>